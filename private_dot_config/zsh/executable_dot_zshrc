
export ZDOTDIR="${HOME}/.config/zsh"

# VIM_CMD configs
VIM_MODE_VICMD_KEY='^D'
MODE_CURSOR_VIINS="#f5bde6 blinking block"
MODE_CURSOR_REPLACE="$MODE_CURSOR_VIINS #ed8796"
MODE_CURSOR_VICMD="#a6da95 block"
MODE_CURSOR_SEARCH="#c6a0f6 steady underline"
MODE_CURSOR_VISUAL="$MODE_CURSOR_VICMD steady bar"
MODE_CURSOR_VLINE="$MODE_CURSOR_VISUAL #8bd5ca"

# Create ~/.zsh if needed
[ ! -d ${ZDOTDIR:-~} ] && mkdir -p ${ZDOTDIR:-~}

# Download zinit if needed
ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"
[ ! -d $ZINIT_HOME ] && mkdir -p "$(dirname $ZINIT_HOME)"
[ ! -d $ZINIT_HOME/.git ] && git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
source "${ZINIT_HOME}/zinit.zsh"

# Download the Catppuccin theme for zsh if needed
CATPPUCCIN_THEME="${ZDOTDIR:-~}/funcs/catppuccin_macchiato-zsh-syntax-highlighting.zsh"

if [ ! -f $CATPPUCCIN_THEME ]; then
wget --output-document="${CATPPUCCIN_THEME}" https://github.com/catppuccin/zsh-syntax-highlighting/raw/main/themes/catppuccin_macchiato-zsh-syntax-highlighting.zsh
fi

fpath+=${ZDOTDIR:-~}/.zsh_functions

# Load aliases file
source "${HOME}/.config/aliases.sh"

# brew completions
if type brew &>/dev/null; then
FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"
fi

# Plugins
zinit light lukechilds/zsh-better-npm-completion
zinit light zsh-users/zsh-completions
zinit light zsh-users/zsh-autosuggestions
zinit light zsh-users/zsh-syntax-highlighting
zinit light softmoth/zsh-vim-mode

# Completion styling
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"

alias zshrc="chezmoi edit ${ZDOTDIR:-~} --apply;sreload"

# Source all zsh files
for z in ${ZDOTDIR:-~}/funcs/*.zsh; do
                              source $z
                              done

# Lines configured by zsh-newuser-install
HISTFILE=${ZDOTDIR:-~}/histfile
HISTSIZE=5000
SAVEHIST=5000
HISTDUP=erase
setopt autocd beep nomatch appendhistory sharehistory hist_ignore_space hist_ignore_all_dups hist_save_no_dups hist_ignore_dups hist_find_no_dups INC_APPEND_HISTORY

bindkey -v

# Keybinds
bindkey '^p' history-search-backward
bindkey '^n' history-search-forward
bindkey '^ ' autosuggest-accept

# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename "${ZDOTDIR}/.zshrc"

autoload -Uz compinit
compinit
# End of lines added by compinstall


# Load shell setup file
source "${HOME}/.config/setup_shell.sh"

